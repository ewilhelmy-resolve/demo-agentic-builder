import{r as m,j as e,c as s,D as h,a as p,B as g,b as f,d as j,e as u,f as v,R as N,E as i}from"./index-nZV1BL2P.js";import{B as n}from"./book-CUyarELV.js";function C({sources:r,className:l,messageId:a}){const[o,d]=m.useState(!1),c=r.some(t=>t.content)?"sm:max-w-7xl":"sm:max-w-2xl";return e.jsx("div",{className:s("not-prose mb-4",l),children:e.jsxs(h,{open:o,onOpenChange:d,children:[e.jsx(p,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"sm",className:"text-primary text-xs font-medium flex items-center gap-2","data-message-id":a,"aria-label":`View ${r.length} source${r.length!==1?"s":""}`,children:[e.jsx(n,{className:"h-4 w-4","aria-hidden":"true"}),e.jsxs("span",{children:["Used ",r.length," source",r.length!==1?"s":""]})]})}),e.jsxs(f,{className:s(c,"max-h-[85vh] flex flex-col"),children:[e.jsxs(j,{children:[e.jsx(u,{children:"Sources"}),e.jsxs(v,{children:[r.length," reference",r.length!==1?"s":""," used in this response"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",role:"list","aria-label":"Citation sources",children:r.map((t,x)=>e.jsx("div",{className:"space-y-3",role:"listitem",children:t.content?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none px-4",children:e.jsx(N,{children:t.content})}),e.jsx("div",{className:"pt-3 border-t border-border px-4",children:e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",onClick:()=>{console.log("Citation clicked:",{messageId:a,sourceUrl:t.url,sourceTitle:t.title,variant:"modal",timestamp:new Date().toISOString()})},children:["View source: ",t.title,e.jsx(i,{className:"h-3 w-3 flex-shrink-0","aria-hidden":"true"})]})})]}):e.jsx("div",{className:"group rounded-lg border border-border p-4 transition-colors hover:bg-accent",children:e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-3 text-sm",onClick:()=>{console.log("Citation clicked:",{messageId:a,sourceUrl:t.url,sourceTitle:t.title,variant:"modal",timestamp:new Date().toISOString()})},children:[e.jsx(n,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-muted-foreground group-hover:text-primary transition-colors","aria-hidden":"true"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-foreground group-hover:text-primary transition-colors",children:t.title}),e.jsx("div",{className:"text-muted-foreground text-xs mt-1 break-all",children:t.url})]}),e.jsx(i,{className:"h-3 w-3 mt-1 flex-shrink-0 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity","aria-hidden":"true"})]})})},`${a}-${x}`))})]})]})})}export{C as ModalCitations};
